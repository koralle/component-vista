---
title: "Passkey | Better Auth"
source_url: "https://www.better-auth.com/docs/plugins/passkey"
fetched_at: "2025-12-17T17:03:49.997163+00:00"
---



Docs

get started, concepts, and plugins

Search documentation...

Get Started

Loading...

Loading...

Loading...

Loading...

Concepts

Authentication

Databases

Integrations

Plugins

Guides

Reference

# Passkey

Copy MarkdownOpen in

Passkeys are a secure, passwordless authentication method using cryptographic key pairs, supported by WebAuthn and FIDO2 standards in web browsers. They replace passwords with unique key pairs: a private key stored on the user's device and a public key shared with the website. Users can log in using biometrics, PINs, or security keys, providing strong, phishing-resistant authentication without traditional passwords.

The passkey plugin implementation is powered by [SimpleWebAuthn](https://simplewebauthn.dev/) behind the scenes.

## [Installation](https://www.better-auth.com/docs/plugins/passkey.html#installation)

### [Install the plugin](https://www.better-auth.com/docs/plugins/passkey.html#install-the-plugin)

npmpnpmyarnbun

```
npm install @better-auth/passkey
```

### [Add the plugin to your auth config](https://www.better-auth.com/docs/plugins/passkey.html#add-the-plugin-to-your-auth-config)

To add the passkey plugin to your auth config, you need to import the plugin and pass it to the `plugins` option of the auth instance.

auth.ts

```
import { betterAuth } from "better-auth"
import { passkey } from "@better-auth/passkey"

export const auth = betterAuth({
    plugins: [
        passkey(),
    ],
})
```

### [Migrate the database](https://www.better-auth.com/docs/plugins/passkey.html#migrate-the-database)

Run the migration or generate the schema to add the necessary fields and tables to the database.

migrategenerate

npmpnpmyarnbun

```
npx @better-auth/cli migrate
```

npmpnpmyarnbun

```
npx @better-auth/cli generate
```

See the [Schema](https://www.better-auth.com/docs/plugins/passkey.html#schema) section to add the fields manually.

### [Add the client plugin](https://www.better-auth.com/docs/plugins/passkey.html#add-the-client-plugin)

auth-client.ts

```
import { createAuthClient } from "better-auth/client"
import { passkeyClient } from "@better-auth/passkey/client"

export const authClient = createAuthClient({
    plugins: [
        passkeyClient()
    ]
})
```

## [Usage](https://www.better-auth.com/docs/plugins/passkey.html#usage)

### [Add/Register a passkey](https://www.better-auth.com/docs/plugins/passkey.html#addregister-a-passkey)

To add or register a passkey make sure a user is authenticated and then call the `passkey.addPasskey` function provided by the client.

ClientServer

POST

/passkey/add-passkey

```
const { data, error } = await authClient.passkey.addPasskey({    name: "example-passkey-name",    authenticatorAttachment: "cross-platform",});
```

| Prop | Description | Type |
| --- | --- | --- |
| `name?` | An optional name to label the authenticator account being registered. If not provided, it will default to the user's email address or user ID | `string` |
| `authenticatorAttachment?` | You can also specify the type of authenticator you want to register. Default behavior allows both platform and cross-platform passkeys | `"platform" | "cross-platform"` |

```
const data = await auth.api.addPasskey({    body: {        name: "example-passkey-name",        authenticatorAttachment: "cross-platform",    },});
```

This is a client-only endpoint

Setting `throw: true` in the fetch options has no effect for the register and sign-in passkey responses â€” they will always return a data object containing the error object.

### [Sign in with a passkey](https://www.better-auth.com/docs/plugins/passkey.html#sign-in-with-a-passkey)

To sign in with a passkey you can use the `signIn.passkey` method. This will prompt the user to sign in with their passkey.

ClientServer

POST

/sign-in/passkey

```
const { data, error } = await authClient.signIn.passkey({    autoFill: true,});
```

| Prop | Description | Type |
| --- | --- | --- |
| `autoFill?` | Browser autofill, a.k.a. Conditional UI. Read more: https://simplewebauthn.dev/docs/packages/browser#browser-autofill-aka-conditional-ui | `boolean` |

```
const data = await auth.api.signInPasskey({    body: {        autoFill: true,    },});
```

This is a client-only endpoint

#### [Example Usage](https://www.better-auth.com/docs/plugins/passkey.html#example-usage)

```
// With post authentication redirect
await authClient.signIn.passkey({
    autoFill: true,
    fetchOptions: {
        onSuccess(context) {
            // Redirect to dashboard after successful authentication
            window.location.href = "/dashboard";
        },
        onError(context) {
            // Handle authentication errors
            console.error("Authentication failed:", context.error.message);
        }
    }
});
```

### [List passkeys](https://www.better-auth.com/docs/plugins/passkey.html#list-passkeys)

You can list all of the passkeys for the authenticated user by calling `passkey.listUserPasskeys`:

ClientServer

GET

/passkey/list-user-passkeys

```
const { data: passkeys, error } = await authClient.passkey.listUserPasskeys();
```

GET

/passkey/list-user-passkeys

```
const passkeys = await auth.api.listPasskeys({    // This endpoint requires session cookies.    headers: await headers(),});
```

### [Deleting passkeys](https://www.better-auth.com/docs/plugins/passkey.html#deleting-passkeys)

You can delete a passkey by calling `passkey.delete` and providing the passkey ID.

ClientServer

POST

/passkey/delete-passkey

```
const { data, error } = await authClient.passkey.deletePasskey({    id: "some-passkey-id", // required});
```

| Prop | Description | Type |
| --- | --- | --- |
| `id` | The ID of the passkey to delete. | `string` |

POST

/passkey/delete-passkey

```
const data = await auth.api.deletePasskey({    body: {        id: "some-passkey-id", // required    },    // This endpoint requires session cookies.    headers: await headers(),});
```

| Prop | Description | Type |
| --- | --- | --- |
| `id` | The ID of the passkey to delete. | `string` |

### [Updating passkey names](https://www.better-auth.com/docs/plugins/passkey.html#updating-passkey-names)

ClientServer

POST

/passkey/update-passkey

```
const { data, error } = await authClient.passkey.updatePasskey({    id: "id of passkey", // required    name: "my-new-passkey-name", // required});
```

| Prop | Description | Type |
| --- | --- | --- |
| `id` | The ID of the passkey which you want to update. | `string` |
| `name` | The new name which the passkey will be updated to. | `string` |

POST

/passkey/update-passkey

```
const data = await auth.api.updatePasskey({    body: {        id: "id of passkey", // required        name: "my-new-passkey-name", // required    },    // This endpoint requires session cookies.    headers: await headers(),});
```

| Prop | Description | Type |
| --- | --- | --- |
| `id` | The ID of the passkey which you want to update. | `string` |
| `name` | The new name which the passkey will be updated to. | `string` |

### [Conditional UI](https://www.better-auth.com/docs/plugins/passkey.html#conditional-ui)

The plugin supports conditional UI, which allows the browser to autofill the passkey if the user has already registered a passkey.

There are two requirements for conditional UI to work:

#### [Update input fields](https://www.better-auth.com/docs/plugins/passkey.html#update-input-fields)

Add the `autocomplete` attribute with the value `webauthn` to your input fields. You can add this attribute to multiple input fields, but at least one is required for conditional UI to work.

The `webauthn` value should also be the last entry of the `autocomplete` attribute.

```
<label for="name">Username:</label>
<input type="text" name="name" autocomplete="username webauthn">
<label for="password">Password:</label>
<input type="password" name="password" autocomplete="current-password webauthn">
```

#### [Preload the passkeys](https://www.better-auth.com/docs/plugins/passkey.html#preload-the-passkeys)

When your component mounts, you can preload the user's passkeys by calling the `authClient.signIn.passkey` method with the `autoFill` option set to `true`.

To prevent unnecessary calls, we will also add a check to see if the browser supports conditional UI.

React

```
useEffect(() => {
   if (!PublicKeyCredential.isConditionalMediationAvailable ||
       !PublicKeyCredential.isConditionalMediationAvailable()) {
     return;
   }

  void authClient.signIn.passkey({ autoFill: true })
}, [])
```

Depending on the browser, a prompt will appear to autofill the passkey. If the user has multiple passkeys, they can select the one they want to use.

Some browsers also require the user to first interact with the input field before the autofill prompt appears.

### [Debugging](https://www.better-auth.com/docs/plugins/passkey.html#debugging)

To test your passkey implementation you can use [emulated authenticators](https://developer.chrome.com/docs/devtools/webauthn). This way you can test the registration and sign-in process without even owning a physical device.

## [Schema](https://www.better-auth.com/docs/plugins/passkey.html#schema)

The plugin require a new table in the database to store passkey data.

Table Name: `passkey`

| Field Name | Type | Key | Description |
| --- | --- | --- | --- |
| id | string | PK | Unique identifier for each passkey |
| name | string | ? | The name of the passkey |
| publicKey | string | - | The public key of the passkey |
| userId | string | FK | The ID of the user |
| credentialID | string | - | The unique identifier of the registered credential |
| counter | number | - | The counter of the passkey |
| deviceType | string | - | The type of device used to register the passkey |
| backedUp | boolean | - | Whether the passkey is backed up |
| transports | string | ? | The transports used to register the passkey |
| createdAt | Date | ? | The time when the passkey was created |
| aaguid | string | ? | Authenticator's Attestation GUID indicating the type of the authenticator |

## [Options](https://www.better-auth.com/docs/plugins/passkey.html#options)

**rpID**: A unique identifier for your website based on your auth server origin.
`'localhost'` is okay for local dev. RP ID can be formed by discarding zero or more labels from the left of its effective domain
until it hits an effective TLD. So `www.example.com` can use the RP IDs `www.example.com` or `example.com`. But not `com`, because that's an eTLD.

**rpName**: Human-readable title for your website.

**origin**: The origin URL at which your better-auth server is hosted. `http://localhost` and `http://localhost:PORT` are also valid. Do NOT include any trailing /.

**authenticatorSelection**: Allows customization of WebAuthn authenticator selection criteria. Leave unspecified for default settings.

* `authenticatorAttachment`: Specifies the type of authenticator
  + `platform`: Authenticator is attached to the platform (e.g., fingerprint reader)
  + `cross-platform`: Authenticator is not attached to the platform (e.g., security key)
  + Default: `not set` (both platform and cross-platform allowed, with platform preferred)
* `residentKey`: Determines credential storage behavior.
  + `required`: User MUST store credentials on the authenticator (highest security)
  + `preferred`: Encourages credential storage but not mandatory
  + `discouraged`: No credential storage required (fastest experience)
  + Default: `preferred`
* `userVerification`: Controls biometric/PIN verification during authentication:
  + `required`: User MUST verify identity (highest security)
  + `preferred`: Verification encouraged but not mandatory
  + `discouraged`: No verification required (fastest experience)
  + Default: `preferred`

**advanced**: Advanced options

* `webAuthnChallengeCookie`: Cookie name for storing WebAuthn challenge ID during authentication flow (Default: `better-auth-passkey`)

## [Expo Integration](https://www.better-auth.com/docs/plugins/passkey.html#expo-integration)

When using the passkey plugin with Expo, you need to configure the `cookiePrefix` option in the Expo client to ensure passkey cookies are properly detected and stored.

By default, the passkey plugin uses `"better-auth-passkey"` as the challenge cookie name. Since this starts with `"better-auth"`, it will work with the default Expo client configuration. However, if you customize the `webAuthnChallengeCookie` option, you must also update the `cookiePrefix` in your Expo client configuration.

### [Example Configuration](https://www.better-auth.com/docs/plugins/passkey.html#example-configuration)

If you're using a custom cookie name:

Server: auth.ts

```
import { betterAuth } from "better-auth";
import { passkey } from "@better-auth/passkey";

export const auth = betterAuth({
    plugins: [
        passkey({
            advanced: {
                webAuthnChallengeCookie: "my-app-passkey" // Custom cookie name
            }
        })
    ]
});
```

Make sure to configure your Expo client with the matching prefix:

Client: auth-client.ts

```
import { createAuthClient } from "better-auth/react";
import { expoClient } from "@better-auth/expo/client";
import { passkeyClient } from "@better-auth/passkey/client";
import * as SecureStore from "expo-secure-store";

export const authClient = createAuthClient({
    baseURL: "http://localhost:8081",
    plugins: [
        expoClient({
            storage: SecureStore,
            cookiePrefix: "my-app" // Must match the prefix of your custom cookie name
        }),
        passkeyClient()
    ]
});
```

If you're using multiple authentication systems or custom cookie names, you can provide an array of prefixes:

Client: auth-client.ts

```
expoClient({
    storage: SecureStore,
    cookiePrefix: ["better-auth", "my-app", "custom-auth"]
})
```

If the `cookiePrefix` doesn't match the prefix of your `webAuthnChallengeCookie`, the passkey authentication flow will fail because the challenge cookie won't be stored and sent back to the server during verification.

For more information on Expo integration, see the [Expo documentation](https://www.better-auth.com/docs/integrations/expo.html).

[Edit on GitHub](https://github.com/better-auth/better-auth/blob/canary/docs/content/docs/plugins/passkey.mdx)

[Previous Page

Email OTP](https://www.better-auth.com/docs/plugins/email-otp.html)[Next Page

Generic OAuth](https://www.better-auth.com/docs/plugins/generic-oauth.html)

### On this page

[Installation](https://www.better-auth.com/docs/plugins/passkey.html#installation)[Install the plugin](https://www.better-auth.com/docs/plugins/passkey.html#install-the-plugin)[Add the plugin to your auth config](https://www.better-auth.com/docs/plugins/passkey.html#add-the-plugin-to-your-auth-config)[Migrate the database](https://www.better-auth.com/docs/plugins/passkey.html#migrate-the-database)[Add the client plugin](https://www.better-auth.com/docs/plugins/passkey.html#add-the-client-plugin)[Usage](https://www.better-auth.com/docs/plugins/passkey.html#usage)[Add/Register a passkey](https://www.better-auth.com/docs/plugins/passkey.html#addregister-a-passkey)[Sign in with a passkey](https://www.better-auth.com/docs/plugins/passkey.html#sign-in-with-a-passkey)[Example Usage](https://www.better-auth.com/docs/plugins/passkey.html#example-usage)[List passkeys](https://www.better-auth.com/docs/plugins/passkey.html#list-passkeys)[Deleting passkeys](https://www.better-auth.com/docs/plugins/passkey.html#deleting-passkeys)[Updating passkey names](https://www.better-auth.com/docs/plugins/passkey.html#updating-passkey-names)[Conditional UI](https://www.better-auth.com/docs/plugins/passkey.html#conditional-ui)[Update input fields](https://www.better-auth.com/docs/plugins/passkey.html#update-input-fields)[Preload the passkeys](https://www.better-auth.com/docs/plugins/passkey.html#preload-the-passkeys)[Debugging](https://www.better-auth.com/docs/plugins/passkey.html#debugging)[Schema](https://www.better-auth.com/docs/plugins/passkey.html#schema)[Options](https://www.better-auth.com/docs/plugins/passkey.html#options)[Expo Integration](https://www.better-auth.com/docs/plugins/passkey.html#expo-integration)[Example Configuration](https://www.better-auth.com/docs/plugins/passkey.html#example-configuration)

Ask AI
